<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Funds</title>

<style>
body{
 margin:0;
 font-family:Arial;
 background:linear-gradient(#6a4b2c,#1c274a);
 color:#fff;
}
.header{
 display:flex;
 align-items:center;
 padding:15px;
}
.header h2{margin:0 10px}
.wallet{
 margin-left:auto;
 background:#000;
 padding:6px 12px;
 border-radius:20px;
}
.card{
 background:#1e274a;
 margin:12px;
 padding:18px;
 border-radius:15px;
 display:flex;
 align-items:center;
 cursor:pointer;
}
.icon{
 background:#ff8c42;
 width:42px;height:42px;
 border-radius:50%;
 display:flex;
 justify-content:center;
 align-items:center;
 margin-right:15px;
}
.card span{font-size:16px}
.bottom{
 position:fixed;
 bottom:0;left:0;right:0;
 background:#1c274a;
 display:flex;
 justify-content:space-around;
 padding:10px 0;
}
.bottom div{
 text-align:center;
 font-size:12px;
 color:#bbb;
 cursor:pointer;
}
.bottom .active{color:#ff8c42}
</style>
</head>

<body>

<div class="header">
 â† <h2>vijay<span style="color:#ffb000">Matka</span></h2>
 <div class="wallet">â‚¹ <span id="wallet">0</span></div>
</div>

<div class="card" onclick="addFund()">
 <div class="icon">â•</div>
 <span>Add Fund</span>
</div>

<div class="card" onclick="uploadDeposit()">
 <div class="icon">ğŸ¦</div>
 <span>Manual Deposit Upload Image</span>
</div>

<div class="card" onclick="withdrawFund()">
 <div class="icon">â¬‡ï¸</div>
 <span>Withdraw Funds</span>
</div>

<div class="card" onclick="location.href='deposithistory.html'">
 <div class="icon">ğŸ“…</div>
 <span>Deposit History</span>
</div>

<div class="card" onclick="location.href='withdrawal-history.index.html'">
 <div class="icon">ğŸ’¸</div>
 <span>Withdrawal History</span>
</div>

<div class="card" onclick="addBank()">
 <div class="icon">ğŸ›ï¸</div>
 <span>Add Bank Details</span>
</div>

<div class="card" onclick="addUpi()">
 <div class="icon">ğŸ“²</div>
 <span>Add UPI Details</span>
</div>

<!-- Bottom Menu -->
<div class="bottom">
 <div onclick="location.href='mybids.html'">âš–ï¸<br>My Bids</div>
 <div onclick="location.href='passbook.html'">ğŸ“˜<br>Passbook</div>
 <div onclick="location.href='dashboard.html'">ğŸ <br>Home</div>
 <div class="active">ğŸ’°<br>Funds</div>
 <div>ğŸ’¬<br>Chat</div>
</div>

<script>
const walletEl = document.getElementById("wallet");

// user identify
let mobile = localStorage.getItem("loggedUser");
if(!mobile){
 mobile = "9999999999";
 localStorage.setItem("loggedUser", mobile);
}

// load user
let user = JSON.parse(localStorage.getItem("user_"+mobile));
if(!user){
 user = {
   wallet: 0,
   passbook: [],
   depositHistory: [],
   withdrawHistory: []
 };
}

// show wallet
walletEl.innerText = user.wallet;

// â• ADD FUND
function addFund(){
 let amt = prompt("Enter amount");
 amt = Number(amt);

 if(isNaN(amt) || amt <= 0){
   alert("Invalid amount");
   return;
 }

 user.wallet += amt;

 user.depositHistory.push({
   amount: amt,
   time: new Date().toLocaleString(),
   status: "SUCCESS"
 });

 user.passbook.push({
   type: "CREDIT",
   amount: amt,
   note: "Add Fund",
   time: new Date().toLocaleString()
 });

 saveData();
 alert("Fund Added Successfully");
}

// â¬‡ï¸ WITHDRAW
function withdrawFund(){
 let amt = prompt("Enter withdraw amount");
 amt = Number(amt);

 if(isNaN(amt) || amt <= 0){
   alert("Invalid amount");
   return;
 }

 if(user.wallet < amt){
   alert("Low balance");
   return;
 }

 user.wallet -= amt;

 user.withdrawHistory.push({
   amount: amt,
   time: new Date().toLocaleString(),
   status: "PENDING"
 });

 user.passbook.push({
   type: "DEBIT",
   amount: amt,
   note: "Withdraw Request",
   time: new Date().toLocaleString()
 });

 saveData();
 alert("Withdraw Requested");
}

// ğŸ›ï¸ BANK
function addBank(){
 let bank = prompt("Bank Name");
 let acc = prompt("Account Number");
 let ifsc = prompt("IFSC Code");

 user.bank = { bank, acc, ifsc };
 saveData();
 alert("Bank Saved");
}

// ğŸ“² UPI
function addUpi(){
 let upi = prompt("Enter UPI ID");
 user.upi = upi;
 saveData();
 alert("UPI Saved");
}

// upload placeholder
function uploadDeposit(){
 alert("Upload deposit image page");
}

// save function
function saveData(){
 localStorage.setItem("user_"+mobile, JSON.stringify(user));
 walletEl.innerText = user.wallet;
}
</script>

</body>
</html>
