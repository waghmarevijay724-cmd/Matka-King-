<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Bids</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2;padding-bottom:60px}
.header{
  background:#fff;padding:12px;font-size:18px;font-weight:bold;
  box-shadow:0 2px 5px rgba(0,0,0,.1)
}
.wallet{
  float:right;background:#111;color:#fff;
  padding:4px 10px;border-radius:4px;font-size:14px
}
.table-wrap{padding:10px}
table{width:100%;border-collapse:collapse;background:#fff}
th,td{
  padding:8px;border-bottom:1px solid #ddd;
  font-size:13px;text-align:center
}
th{background:#222;color:#fff;position:sticky;top:0}
.no-data{text-align:center;color:#777;padding:20px}
.clear-btn{
  margin:10px;padding:10px;width:calc(100% - 20px);
  background:red;color:#fff;border:none;
  border-radius:5px;font-size:16px
}
</style>
</head>

<body>

<div class="header">
  My Bids
  <span class="wallet">â‚¹ <span id="walletBal">0</span></span>
</div>

<div class="table-wrap">
<table>
<thead>
<tr>
  <th>Date</th>
  <th>Time</th>
  <th>Market</th>
  <th>Open/Close</th>
  <th>Bid</th>
  <th>Points</th>
  <th>Balance</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
<div id="noData" class="no-data">No Bids Found</div>
</div>

<button class="clear-btn" onclick="clearHistory()">Clear History</button>

<script>
// ðŸ” LOGIN CHECK
let mobile = localStorage.getItem("loggedUser");
if(!mobile) location.href="index.html";

let userKey = "user_"+mobile;
let user = JSON.parse(localStorage.getItem(userKey)) || {wallet:0,myBids:[]};

document.getElementById("walletBal").innerText = user.wallet || 0;

let tbody = document.getElementById("tbody");
let noData = document.getElementById("noData");

function loadBids(){
  tbody.innerHTML="";

  if(!user.myBids || user.myBids.length===0){
    noData.style.display="block";
    return;
  }

  noData.style.display="none";

  user.myBids.slice().reverse().forEach(b=>{
    let tr=document.createElement("tr");
    tr.innerHTML=`
      <td>${b.date}</td>
      <td>${b.time}</td>
      <td>${b.marketName}</td>
      <td>${b.openClose}</td>
      <td>${b.bid}</td>
      <td>${b.points}</td>
      <td>â‚¹${b.balance}</td>
    `;
    tbody.appendChild(tr);
  });
}

function clearHistory(){
  if(confirm("Clear all bid history?")){
    user.myBids=[];
    localStorage.setItem(userKey,JSON.stringify(user));
    loadBids();
  }
}

loadBids();
</script>

</body>
</html>
