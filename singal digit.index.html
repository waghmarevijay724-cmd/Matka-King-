
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Single Digit</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2;padding-bottom:80px}
.header{
 display:flex;align-items:center;
 padding:12px;background:#fff;
 box-shadow:0 2px 5px rgba(0,0,0,.1)
}
.wallet{
 margin-left:auto;
 background:#111;color:#fff;
 padding:6px 14px;border-radius:20px;
 font-size:14px
}
.container{padding:15px}
select,input{
 width:100%;padding:12px;margin-bottom:10px;
 border-radius:6px;border:1px solid #ccc;font-size:15px
}
button{
 width:100%;padding:14px;
 background:#ff9800;color:#fff;
 border:none;border-radius:30px;
 font-size:16px
}
</style>
</head>

<body>

<div class="header" id="marketName">MILAN DAY</div>
 <div class="wallet">₹ <span id="walletBal">0</span></div>
</div>

<div class="container">

<select id="gameType">
 <option value="OPEN">OPEN</option>
 <option value="CLOSE">CLOSE</option>
</select>

<input type="number" id="digit" placeholder="Enter Digit (0-9)">
<input type="number" id="points" placeholder="Enter Points">

<button onclick="submitSingleDigit()">Submit</button>

</div>

<script>
// ✅ MASTER WALLET
let wallet = parseInt(localStorage.getItem("walletBalance") || "0");
document.getElementById("walletBal").innerText = wallet;
 function getMarketName(){
  let m1 = document.getElementById("marketName");
  if(m1) return m1.innerText.trim();

  let m2 = document.getElementById("market");
  if(m2) return m2.value;

  return "Unknown Market";
 }let marketName = localStorage.getItem("selectedMarket") || "UNKNOWN";
function getMarketName(){
  let el = document.getElementById("marketName");
  return el ? el.innerText.trim() : "Unknown Market";
}
function submitSingleDigit(){

 let digit = document.getElementById("digit").value;
 let points = parseInt(document.getElementById("points").value);
 let type = document.getElementById("gameType").value;

 if(digit==="" || points===""){
  alert("Fill all fields");
  return;
 }

 if(points > wallet){
  alert("Low Wallet Balance");
  return;
 }

 wallet -= points;
 

 // ✅ SAVE BID HISTORY
 let history = JSON.parse(localStorage.getItem("bidHistory")) || [];
 let now = new Date();

 history.push({
  date: now.toLocaleDateString(),
  time: now.toLocaleTimeString(),
  marketNamae: "market",
  session: type,
  number: digit,
  points: points,
  balance: wallet
 });user.myBids.push({
  date: date,
  time: time,
  marketName: marketName,   // ⭐ FIX
  openClose: session,
  bid: digit,
  points: points,
  balance: user.wallet
});

 localStorage.setItem("walletBalance", wallet);
 localStorage.setItem("bidHistory", JSON.stringify(history));

 alert("Single Digit Bid Submitted");
 location.href = "my bids.index.html";
}
</script>

</body>
</html>
