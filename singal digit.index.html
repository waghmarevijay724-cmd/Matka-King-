<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Single Digit</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2;padding-bottom:80px}
.header{
 display:flex;align-items:center;
 padding:12px;background:#fff;
 box-shadow:0 2px 5px rgba(0,0,0,.1)
}
.wallet{
 margin-left:auto;
 background:#111;color:#fff;
 padding:6px 14px;border-radius:20px;
 font-size:14px
}
.container{padding:15px}
select,input{
 width:100%;padding:12px;margin-bottom:10px;
 border-radius:6px;border:1px solid #ccc;font-size:15px
}
button{
 width:100%;padding:14px;
 background:#ff9800;color:#fff;
 border:none;border-radius:30px;
 font-size:16px
}
</style>
</head>

<body>

<div class="header">
 <div id="marketName">MARKET</div>
 <div class="wallet">â‚¹ <span id="walletBal">0</span></div>
</div>

<div class="container">

<select id="gameType">
 <option value="OPEN">OPEN</option>
 <option value="CLOSE">CLOSE</option>
</select>

<input type="number" id="digit" placeholder="Enter Digit (0-9)" min="0" max="9">
<input type="number" id="points" placeholder="Enter Points">

<button onclick="submitSingleDigit()">Submit</button>

</div>

<script>
// ðŸ” LOGIN CHECK
let mobile = localStorage.getItem("loggedUser");
if(!mobile) location.href="index.html";

let userKey = "user_"+mobile;
let user = JSON.parse(localStorage.getItem(userKey)) || {wallet:0,myBids:[]};

// âœ… MARKET NAME
let marketName = localStorage.getItem("selectedMarket") || "UNKNOWN";
document.getElementById("marketName").innerText = marketName;

// âœ… WALLET
document.getElementById("walletBal").innerText = user.wallet;

// âœ… SUBMIT
function submitSingleDigit(){

 let digit = document.getElementById("digit").value.trim();
 let points = parseInt(document.getElementById("points").value);
 let session = document.getElementById("gameType").value;

 if(digit==="" || isNaN(points)){
  alert("Fill all fields");
  return;
 }

 if(points > user.wallet){
  alert("Low Wallet Balance");
  return;
 }

 // ðŸ”» WALLET DEDUCT
 user.wallet -= points;

 let now = new Date();

 // âœ… SAVE TO MY BIDS (IMPORTANT)
 user.myBids.push({
  date: now.toLocaleDateString(),
  time: now.toLocaleTimeString(),
  marketName: marketName,
  openClose: session,
  bid: digit,
  points: points,
  balance: user.wallet
 });

 // ðŸ’¾ SAVE USER
 localStorage.setItem(userKey, JSON.stringify(user));

 alert("Single Digit Bid Submitted");
 location.href = "my bids.index.html";
}
</script>

</body>
</html>
